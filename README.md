# Погодный бот для Telegram

Этот проект представляет собой Telegram бота, который предоставляет информацию о погоде, а также API для доступа к логам использования бота.

## Установка и запуск

### Шаги по установке

1. Клонируйте репозиторий:
   ```
   git clone https://github.com/ваш-username/погодный-бот.git
   ```

2. Установите зависимости:
   ```
   npm i
   ```

3. Создайте файл `.env` в корневой директории проекта и добавьте следующие переменные окружения:
   ```
    PORT=5000
    TELEGRAM_BOT_TOKEN='Ваш токен'
    OPENWEATHERMAP_API_KEY='Ключ от опенвезер'
    DB_NAME='имя бд'
    DB_USER='имя пользователя бд'
    DB_PASS='пароль бд'
    DB_HOST='хост бд'
   ```

4. Создайте базу данных в PostgreSQL с именем, указанным в `DB_NAME`.

### Запуск программы

1. Запустите сервер:
   ```
   npm start
   ```

2. API будет доступно по адресу `http://localhost:5000` (или на порте, который вы указали в `.env` файле).

## Документация API

### Эндпоинты

#### 1. Получение всех логов

Получает список всех логов с возможностью пагинации и фильтрации по дате.

```
GET /logs
```

##### Пример запроса

```
GET /logs?page=1&limit=10&startDate=2023-01-01&endDate=2023-12-31
```

##### Пример ответа

```json
{
  "totalItems": 33,
  "totalPages": 4,
  "currentPage": 1,
  "logs": [
    {
        "id": 33,
        "userId": 1228581473,
        "command": "/setcity Волжский",
        "response": "Город по умолчанию установлен на: Волжский",
        "createdAt": "2024-10-11T15:16:27.543Z",
        "updatedAt": "2024-10-11T15:16:27.543Z"
    },
  ]
}
```

#### 2. Получение логов конкретного пользователя

Получает список логов для конкретного пользователя с возможностью пагинации и фильтрации по дате.

```
GET /logs/:user_id
```
##### Пример запроса

```
GET /logs/123456789?page=1&limit=10&startDate=2023-01-01&endDate=2023-12-31
```

##### Пример ответа

```json
{
  "totalItems": 33,
  "totalPages": 4,
  "currentPage": 1,
  "logs": [
    {
        "id": 33,
        "userId": 1228581473,
        "command": "/setcity Волжский",
        "response": "Город по умолчанию установлен на: Волжский",
        "createdAt": "2024-10-11T15:16:27.543Z",
        "updatedAt": "2024-10-11T15:16:27.543Z"
    },
  ]
}
```